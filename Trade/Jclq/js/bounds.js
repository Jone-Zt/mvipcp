(function(e){"use strict";e=e||{},window.Game=e,e.jclq=e.jclq||{};var t=function(e){var t=[],n={};if($.type(e)==="array"){for(var r=0,i=e.length;r<i;r++)n[e[r]]?n[e[r]]++:n[e[r]]=1;for(var s in n)t.push([s,n[s]])}return t},n=function(e,t){var n=[],r=function(e,t,n,i,s){var o,u=e.length-s,a;for(a=i;a<=u;a++)o=n.slice(0),o.push(e[a]),s==1?t.push(o):r(e,t,o,a+1,s-1)};return r(e,n,[],0,t),n},r=function(e,t){var n=[],r=function(e,t,n,i,s){var o,u=e.length-s,a,f;for(a=i;a<=u;a++)for(f=0;f<e[a].length;f++)o=n.slice(0),o.push(e[a][f]),s==1?t.push(o):r(e,t,o,a+1,s-1)};return!e||!e.length?n:(r(e,n,[],0,t||e.length),n)},i=function(e){if(!e||!e.length)return null;var t=[];for(var n=0;n<e.length;n++)t[n]=e[n];return t},s=function(e){var t=[];if(!e)return t;for(var n in e)n!="length"&&t.push(n);return t},o=function(e,t){var n=!0;if(!e||!t||!e.length||!t.length)return;if(e.length>t.length)return!1;for(var r=0;r<e.length;r++){n=!1;for(var i=0;i<t.length;i++)if(t[i]==e[r]){n=!0;break}if(!n)return!1}return!0},u=function(e,t){return e.sum-t.sum},a=function(e,t){return e[4]-t[4]};e.groupNum=e.groupNum||t,e.CR=e.CR||n;var f={methodType:{"1_1":[1],"2_1":[2],"3_1":[3],"4_1":[4],"5_1":[5],"6_1":[6],"7_1":[7],"8_1":[8],"9_1":[9],"10_1":[10],"11_1":[11],"12_1":[12],"13_1":[13],"14_1":[14],"15_1":[15],"2_3":[2,1],"3_3":[2],"3_4":[3,2],"3_6":[2,1],"3_7":[3,2,1],"4_4":[3],"4_5":[4,3],"4_6":[2],"4_10":[2,1],"4_11":[4,3,2],"4_14":[3,2,1],"4_15":[4,3,2,1],"5_5":[4],"5_6":[5,4],"5_10":[2],"5_15":[2,1],"5_16":[5,4,3],"5_20":[3,2],"5_25":[3,2,1],"5_26":[5,4,3,2],"5_30":[4,3,2,1],"5_31":[5,4,3,2,1],"6_6":[5],"6_7":[5,6],"6_15":[2],"6_20":[3],"6_21":[2,1],"6_22":[6,5,4],"6_35":[3,2],"6_41":[3,2,1],"6_42":[6,5,4,3],"6_50":[4,3,2],"6_56":[4,3,2,1],"6_57":[6,5,4,3,2],"6_62":[5,4,3,2,1],"6_63":[6,5,4,3,2,1],"7_7":[6],"7_8":[7,6],"7_21":[5],"7_35":[4],"7_120":[7,6,5,4,3,2],"7_127":[7,6,5,4,3,2,1],"8_8":[7],"8_9":[8,7],"8_28":[6],"8_56":[5],"8_70":[4],"8_247":[8,7,6,5,4,3,2],"8_255":[8,7,6,5,4,3,2,1]},selectMethod:[],gameTypes:["sfc","rsf","dxf","sfd"],exChange:{sfc:{3:"3",0:"0"},"rsf>0":{3:"30",0:"0"},"rsf<0":{3:"3",0:"30"},"rsf=0":{3:"3",0:"0"},dxf:{2:"30",1:"30"},sfd:{"01":"0","02":"0","03":"0","04":"0","05":"0","06":"0",31:"3",32:"3",33:"3",34:"3",35:"3",36:"3"}},mustData:{sfc:{3:"1",0:"1"},"rsf>0":{3:"1",0:"2"},"rsf<0":{3:"2",0:"1"},dxf:{3:"2",0:"2"},sfd:{3:"6",0:"6"}},selectGameInfo:[]},l,c,h=function(){var t=[],n=l.selectMethod,r=l.selectGameInfo,s=l.methodType,o,u,a,f,h,p,d,m=[],g={d:[],t:[]};c={};for(var y=0;y<n.length;y++)t=t.concat(s[n[y]]);t=e.groupNum(t),t=i(t).sort(function(e,t){return e[0]-t[0]}),r=i(r).sort(function(e,t){return e.matchCode-t.matchCode});for(var y=0;y<r.length;y++)p=v(r[y]),m.push(r[y].matchCode),g[r[y].isDan?"d":"t"].push(p);return c.methods=t,c.mutiData=g,c.matchCodes=m,[t,g,m]},p=function(e,t){var n=l.exChange,r;return e=="rsf"?t>0?r="rsf>0":t<0?r="rsf<0":r="rsf=0":r=e,n[r]},d=function(e,t){var n=l.mustData,r;return e=="rsf"?t>0?r="rsf>0":r="rsf<0":r=e,n[r]},v=function(e){var t={3:[],0:[]},n,r,i,s,o=l.gameTypes,u,a,f,c=e.score,h=e.matchCode,d,v;n=e.sp;for(var i=0;i<o.length;i++){r=o[i];if(r){s=n[r],a=[],f=[];if(s){u=p(r,c);for(v in s){s[v]=+s[v];if(!u[v])throw"\u8ba1\u7b97\u5956\u91d1\u51fa\u73b0\u9519\u8bef\uff0c\u6ce8\u610f\u770boptionType\uff0c\u4e5f\u5c31\u662f\u73a9\u6cd5\u7684type\u662f\u5426\u6b63\u786e";d=[r,v,h,c,s[v]],u[v].indexOf("3")>-1&&a.push(d),u[v].indexOf("0")>-1&&f.push(d)}}a.length&&t[3].push(a),f.length&&t[0].push(f)}}return m(t)},m=function(e){var t,n,r,i={3:{},0:{}},s,o,u,a=function(e,t,n){var r=[],i=function(e,t,r,s,u){var a,f=e.length-u,l,c,h;for(l=s;l<=f;l++)for(c=0;c<e[l].length;c++){a=r.slice(0),a.push(e[l][c]);if(u==1){h=b(n,a);if(h){a.sum=h,a.resultType=n;if(!o||o.sum<h)o=a;t.push(a)}}else i(e,t,a,l+1,u-1)}};return!e||!e.length?r:(i(e,r,[],0,t||e.length),r)};for(t in e){n=e[t];for(r=1;r<=n.length;r++)s=a(n,r,t),i[t][r]=s}return u=g(i),{min:y(u),max:o}},g=function(e){var t,n,r={},i,s,o,u,a,f,l;for(t in e)for(n in e[t]){f=e[t][n];for(i=0;i<f.length;i++)for(s=0;s<f[i].length;s++)a=f[i][s],o=a[0],u=a[1],r[o]=r[o]||{},r[o][u]=r[o][u]||{},r[o][u][t]=r[o][u][t]||{},r[o][u][t][f[i].length]=r[o][u][t][f[i].length]||[],l=r[o][u][t][f[i].length],l.push(f[i])}return r},y=function(e){var t,n,r,i,u,a,f,l,c,h,p,d,v,m,g,y,b,E,S,x,T=function(e,t){var n={sfc:[],rsf:[],dxf:[],sfd:[]},r,i={sfc:{},rsf:{},dxf:{},sfd:{}};for(var s=0;s<e.length;s++)for(var o=0;o<e[s].length;o++)e[s][o][0]!=t&&(r=e[s][o],i[r[0]][r[1]]||(i[r[0]][r[1]]=1,n[r[0]].push(r)));return n};for(i in e){a=e[i],y=null;for(r in a)for(x in a[r]){n=a[r][x],f=null,p=s(n),f=n[1][0];if(p.length>1){b=T(n[2],i);for(E=2;E<=5;E++){l=null,m=n[E];if(!m)continue;for(h=0;h<m.length;h++){for(g=0;g<m[h].length;g++)if(m[h][g][0]==i){v=m[h][g];break}c=[],c.sum=0;for(g=0;g<m[h].length;g++)m[h][g][0]!=i&&w(v,m[h][g],b,x)&&(c.push(m[h][g]),c.sum+=m[h][g][4]);if(c.length){c.push(v),c.sum+=v[4];if(!l||l.sum>c.sum)l=c}}l&&(f.length==1||o(f,l)||f.sum>l.sum)&&(f=l)}}if(f){t&&t.length>1&&o(t,f)&&(t=null);if(!y||y.sum>f.sum)y=f}}y&&(!t||t.sum>y.sum)&&(t=y)}return t},y=function(e){var t,n,r,i,u,a,f,l,c,h,p,d,v,m,g,y,b,E,S,x,T=function(e,t){var n={sfc:[],rsf:[],dxf:[],sfd:[]},r,i={sfc:{},rsf:{},dxf:{},sfd:{}};for(var s=0;s<e.length;s++)for(var o=0;o<e[s].length;o++)e[s][o][0]!=t&&(r=e[s][o],i[r[0]][r[1]]||(i[r[0]][r[1]]=1,n[r[0]].push(r)));return n};for(i in e){a=e[i],y=null;for(r in a)for(x in a[r]){n=a[r][x],f=null,p=s(n),f=n[1][0];if(p.length>1){b=T(n[2],i),p.sort(),m=n[p[p.length-1]];for(h=0;h<m.length;h++){for(g=0;g<m[h].length;g++)if(m[h][g][0]==i){v=m[h][g];break}c=[],c.sum=0;for(g=0;g<m[h].length;g++)m[h][g][0]!=i&&w(v,m[h][g],b,x)&&(c.push(m[h][g]),c.sum+=m[h][g][4]);if(c.length){c.push(v),c.sum+=v[4];if(f.length==1||f.sum>c.sum)f=c}}}if(f){t&&t.length>1&&o(t,f)&&(t=null);if(!y||y.sum>f.sum)y=f}}y&&(!t||t.sum>y.sum)&&(t=y)}return t},b=function(e,t){var n,r,i,s,o,u,a,f,l;a=t;for(var c=0;c<a.length;c++)switch(a[c][0]){case"sfc":n=a[c];break;case"rsf":r=a[c];break;case"dxf":i=a[c];break;case"sfd":s=a[c]}if(a.length==1)return a[0][4];if(a.length==2)if(n&&r){o=n[3];if(o>0){if(e!=3)return n[4]+r[4];if(r[1]=="3")return n[4]+r[4]}else{if(e==3)return n[4]+r[4];if(r[1]=="0")return n[4]+r[4]}}else{if(n&&i)return n[4]+i[4];if(n&&s)return n[4]+s[4];if(r&&i)return r[4]+i[4];if(r&&s){f={"01":[1,5],"02":[6,10],"03":[11,15],"04":[16,20],"05":[21,25],"06":[26,1e5],31:[1,5],32:[6,10],33:[11,15],34:[16,20],35:[21,25],36:[26,1e5]},l=f[s[1]],o=r[3],u=Math.abs(o);if(o>0)if(e==3){if(r[1]=="3")return r[4]+s[4]}else{if(r[1]=="3"&&l[0]<u)return r[4]+s[4];if(r[1]=="0"&&l[1]>u)return r[4]+s[4]}else if(e==3){if(r[1]=="3"&&l[1]>u)return r[4]+s[4];if(r[1]=="0"&&l[0]<u)return r[4]+s[4]}else if(r[1]=="0")return r[4]+s[4]}else if(i&&s)return i[4]+s[4]}else if(a.length==3){if(b(e,[a[0],a[1]])&&b(e,[a[0],a[2]])&&b(e,[a[1],a[2]]))return a[0][4]+a[1][4]+a[2][4]}else if(a.length==4&&b(e,[a[0],a[1]])&&b(e,[a[0],a[2]])&&b(e,[a[0],a[3]])&&b(e,[a[1],a[2]])&&b(e,[a[1],a[3]])&&b(e,[a[2],a[3]]))return a[0][4]+a[1][4]+a[2][4]+a[3][4];return 0},w=function(e,t,n,r){if(!n)return!1;var i,s,o,u,a,f,l,c,h,p,v;s=e[0],o=e[1],i=e[3],p=Math.abs(i),u=t[0],a=t[1],f=null;switch(s){case"sfc":case"dxf":v=d(u,i),f=v[r];break;case"rsf":if(u=="sfc")f=1;else if(u=="sfd"){l={1:[1,5],2:[6,10],3:[11,15],4:[16,20],5:[21,25],6:[26,1e5]};if(i>0)if(r==3)o=="3"&&(f=6);else{f=0;if(o=="3")for(h in l)l[h][0]<p&&(f+=1);if(o=="0")for(h in l)l[h][1]>p&&(f+=1)}else if(r==3){f=0;if(o=="3")for(h in l)l[h][1]>p&&(f+=1);if(o=="0")for(h in l)l[h][0]<p&&(f+=1)}else o=="0"&&(f=6)}else u=="dxf"&&(f=2);break;case"sfd":u=="sfc"?f=1:u=="rsf"?(l={"01":[1,5],"02":[6,10],"03":[11,15],"04":[16,20],"05":[21,25],"06":[26,1e5],31:[1,5],32:[6,10],33:[11,15],34:[16,20],35:[21,25],36:[26,1e5]},c=l[o],i>0?r==3?f=1:(f=0,c[0]<p&&(f+=1),c[1]>p&&(f+=1)):r==3?(f=0,c[0]<p&&(f+=1),c[1]>p&&(f+=1)):f=1):u=="dxf"&&(f=2)}if(f&&n[u]&&f==n[u].length)return!0},E=function(e){var t,n,r={},i=c.matchCodes.length,s=c.methods,o=c.mutiData,u,a,f,l,h,p=function(e,t){return e.min.sum-t.min.sum},d=function(e,t){return t.max.sum-e.max.sum};if(!s||s.length==0)return{};u=s[0][0],e=+e,e&&e<=i&&e>=u?i=e:e=u,o.d=o.d||[],o.t=o.t||[],a=o.d.sort(p).slice(0),l=o.t.sort(p).slice(0),f=o.d.sort(d).slice(0),h=o.t.sort(d).slice(0);for(var v=e;v<=i;v++){!r[v]&&(r[v]={}),n={d:[],t:[]};for(var m=0;m<f.length;m++)n.d.push(f[m].max);for(var m=0;m<v-f.length;m++)n.t.push(h[m].max);r[v].maxData=n,n={d:[],t:[]};for(var m=0;m<a.length;m++)n.d.push(a[m].min);for(var m=0;m<v-a.length;m++)n.t.push(l[m].min);r[v].minData=n}return c.matchPoss=r,r},S=function(e,t,n){var i=+n[0][0],s=+n[n.length-1][0],o={},u=e.length,a,f=t.length;a=T(k(t))||1,t=r(t);for(var l=0;l<n.length;l++)u+f>=n[l][0]?o[n[l][0]]=x(e,n[l][0]-f,t,n[l][1]*2*a):o[n[l][0]]={data:[],val:0};return o},x=function(e,t,n,r){var i={data:[],val:0},s=function(e,t,i,o,u,a){var f,l=e.length-a,c,h,p,d;for(c=u;c<=l;c++)for(h=0;h<e[c].length;h++){f=i.slice(0),f.push(e[c][h]),p=o*e[c][h][4];if(a==1){if(n.length)for(var d=0;d<n.length;d++)t.data.push(f.concat(n[d]));else t.data.push(f);t.val+=p*r}else s(e,t,f,p,c+1,a-1)}};return!e||!e.length?i:(s(e,i,[],1,0,t||e.length),i)},T=function(e,t,n){var r=0,i=function(e,t,s,o){var u,a=e.length-o,f,l;for(f=s;f<=a;f++)for(l=0;l<e[f].length;l++)u=t*e[f][l],o==1?r+=u*n:i(e,u,f+1,o-1)};return n=n||1,!e||!e.length?r:(i(e,1,0,t||e.length),+r||0)},N=function(){var e,t,n={},r={},i,s;h(),e=E(),t=c.methods;for(var o in e)i=e[o].maxData,i&&(n[o]=S(i.t,i.d,t)),i=e[o].minData,i&&(r[o]=S(i.t,i.d,t));return c.maxData=n,c.minData=r,{maxData:n,minData:r}},C=function(){return h(),c.mutiData},k=function(e){var t=[],n,r,i;if(!e||!e.length)return t;for(n=0;n<e.length;n++){i=[];for(r=0;r<e[n].length;r++)i.push(e[n][r][4]);t.push(i)}return t},L=function(e,t){var n,r,i,s=0,o,u,a,f,l=0,p;t+=t,h(),r=c.methods,n=E(t?t:e?c.matchCodes.length:r[0][0]);for(var d in n){i=n[d][e?"maxData":"minData"];if(i){u=k(i.d),a=k(i.t),f=u.length,l=T(u);for(p=0;p<r.length;p++)s+=T(a,r[p][0]-f,(l||1)*2*r[p][1])}}return+s||0},A=function(e){return D(e),L(!0)||0},O=function(e){return D(e),L(!1)||0},M=function(e){return D(e),N()},_=function(e){return D(e),C()},D=function(e){l={},e=$.type(e)=="object"?e:{};for(var t in e)l[t]=e[t];for(var t in f)l[t]=l[t]==undefined||l[t]==null||l[t]==""?f[t]:l[t]};e.jclq.getMaxBound=A,e.jclq.getMinBound=O,e.jclq.detailBound=M,e.jclq.getSpComboBound=_})(window.Game);