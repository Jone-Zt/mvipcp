!function(e){var t={},i,o,n,r,a=750,u;function p(e,t,i,o){return Math.abs(e-t)>=Math.abs(i-o)?e-t>0?"Left":"Right":i-o>0?"Up":"Down"}function l(){r=null;if(t.last){t.el.trigger("longTap");t={}}}function c(){if(r)clearTimeout(r);r=null}function s(){if(i)clearTimeout(i);if(o)clearTimeout(o);if(n)clearTimeout(n);if(r)clearTimeout(r);i=o=n=r=null;t={}}function f(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function g(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}e(document).ready(function(){var d,h,T=0,w=0,y,v;var m=e('<div id="forTap" style="color: White;opacity:0;border-radius: 60px; position: absolute; z-index: 99999; width: 60px; height: 60px;left:-999px;top:-999px;"></div>');e("body").append(m);m.on("touchend",function(e){e.preventDefault();e.stopPropagation()});if("MSGesture"in window){u=new MSGesture;u.target=document.body}e(document).bind("MSGestureEnd",function(e){e=e.originalEvent||e;var i=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;if(i){t.el.trigger("swipe");t.el.trigger("swipe"+i)}}).on("touchstart MSPointerDown pointerdown",function(o){o=o.originalEvent||o;if((v=g(o,"down"))&&!f(o))return;y=v?o:o.touches[0];if(o.touches&&1===o.touches.length&&t.x2){t.x2=void 0;t.y2=void 0}d=Date.now();h=d-(t.last||d);t.el=e("tagName"in y.target?y.target:y.target.parentNode);i&&clearTimeout(i);t.x1=y.pageX;t.y1=y.pageY;if(h>0&&h<=250)t.isDoubleTap=true;t.last=d;r=setTimeout(l,a);if(u&&v)u.addPointer(o.pointerId);var n=t.el;t.isShowTap=false;while(n[0]&&"BODY"!=n[0].nodeName){if(n.attr("lazyTap")){t.isShowTap=true;break}n=n.parent()}}).on("touchmove MSPointerMove pointermove",function(e){e=e.originalEvent||e;if((v=g(e,"move"))&&!f(e))return;y=v?e:e.touches[0];c();t.x2=y.pageX;t.y2=y.pageY;T+=Math.abs(t.x1-t.x2);w+=Math.abs(t.y1-t.y2)}).on("touchend MSPointerUp pointerup",function(r){r=r.originalEvent||r;if((v=g(r,"up"))&&!f(r))return;c();if(t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30)n=setTimeout(function(){t.el.trigger("swipe");t.el.trigger("swipe"+p(t.x1,t.x2,t.y1,t.y2));t={}},0);else if("last"in t)if(T<30&&w<30)o=setTimeout(function(){var o=e.Event("tap");o.cancelTouch=s;t.el.trigger(o);if(t.isShowTap){m.css({top:r.changedTouches[0].pageY-30+"px",left:r.changedTouches[0].pageX-30+"px"});setTimeout(function(){m.css({left:"-999px",top:"-999px"})},350)}if(t.isDoubleTap){if(t.el)t.el.trigger("doubleTap");t={}}else i=setTimeout(function(){i=null;if(t.el)t.el.trigger("singleTap");t={}},250)},0);else t={};T=w=0}).on("touchcancel MSPointerCancel pointercancel",s);e(window).on("scroll",s)});["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(window.jQuery||window.Zepto);