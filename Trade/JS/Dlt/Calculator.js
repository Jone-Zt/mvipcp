(function(e){var t=e.$,n=e.kureicp;n.mobile.lotType=n.lottery.lotType.dlt,n.mobile.price=n.lottery.price,n.mobile.bonus=[0,0,0,3e3,600,100,10,5],n.mobile.level=[0,0,0],n.mobile.rule=0,n.mobile.opencodeAPI="/int/qkjinfo",n.mobile.openissueAPI="/int/issuelist",n.mobile.initOpenissue=function(){t.getJSON(n.mobile.openissueAPI+"?lotid="+n.mobile.lotType+"&r="+t.now(),function(e){if(e){var r=[],i=e.length,s=t("#issue");for(var o=0;o<i;o++)r.push('<option value="'+e[o]+'">'+e[o]+"\u671f</option>");s.append(r.join("")),n.mobile.initOpencode()}})},n.mobile.initOpencode=function(){var e=t.trim(t("#issue").val()),r=e.match(/^(\d{4})(\d{3})$/),i=r[1]*1,s=r[2]*1;i==2014&&s>=52||i>2014?(n.mobile.rule=1,n.mobile.bonus=[0,0,0,200,10,5]):(n.mobile.rule=0,n.mobile.bonus=[0,0,0,3e3,600,100,10,5]);var o=n.mobile.opencodeAPI+"?LotID="+n.mobile.lotType+"&Issue="+e+"&r="+t.now(),u,a,f=[],l=[],c=t(".kj-ball");t.getJSON(o,function(e){if(e){var t,r,i;if(e.Code){t=e.Level1.split(":")[0]*1,r=e.Level2.split(":")[0]*1,i=e.Level3.split(":")[0]*1,n.mobile.level[0]=n.mobile.bonus[0]=t,n.mobile.level[1]=n.mobile.bonus[1]=r,n.mobile.level[2]=n.mobile.bonus[2]=i,l=e.Code.split("+"),u=l[0].replace(/(\s)+/ig,"*").split("*"),a=l[1].replace(/(\s)+/ig,"*").split("*");for(var s=0;s<u.length;s++)f.push('<span class="redball">'+u[s]+"</span>");for(var s=0;s<a.length;s++)f.push('<span class="blueball">'+a[s]+"</span>");c.html(f.join(""))}else c.html("\u6682\u65e0\u6570\u636e")}})},n.mobile.count=function(){var e=1,r=t("#beforeball").text()*1,i=t("#backball").text()*1;e=n.number.combo(r,5)*n.number.combo(i,2),t("#tcount").text(e),t("#tmoney").text(e*n.mobile.price)},n.mobile.reflashSimple=function(e){var t=n.mobile.bonus;if(e==1){for(var r=0;r<3;r++)t[r]&&(n.mobile.bonus[r]=n.number.format(t[r]*1.6,2,0));for(var r=3;r<5;r++)n.mobile.bonus[r]=n.number.format(t[r]*1.5,2,0)}else{var i=n.mobile.rule;i?n.mobile.bonus=[n.mobile.level[0],n.mobile.level[1],n.mobile.level[2],200,10,5]:n.mobile.bonus=[n.mobile.level[0],n.mobile.level[1],n.mobile.level[2],3e3,600,100,10,5]}},n.mobile.isZJ=function(e,t){var r=e+t,i,s=n.mobile.rule;if(s)switch(r){case 7:return i=0,i;case 6:return t==1?i=1:t==2&&(i=2),i;case 5:return t==0?i=2:t==1?i=3:t==2&&(i=3),i;case 4:if(t==0||t==1||t==2)i=4;return i;case 3:if(t==0||t==1||t==2)i=5;return i;case 2:return t==2&&(i=5),i;default:return-1}else switch(r){case 7:return 0;case 6:return t==1?1:3;case 5:return t===0?2:t==1?4:5;case 4:return t===0?5:6;case 3:return 7;case 2:return t==2?7:-1;default:return-1}},n.mobile.calculateBonus=function(){var e,r=8,i=n.mobile.rule,s=t("#seven,#eight");i?(e=[0,0,0,0,0,0],r=6,s.addClass("none")):(e=[0,0,0,0,0,0,0,0],s.removeClass("none"));var o=t("#beforeball").text()*1,u=t("#backball").text()*1,a=t("#hitbeforeball").text()*1,f=t("#hitbackball").text()*1,l=t(".ncount"),c=t(".nmoney"),h=1,p=0;for(var d=0;d<=a;d++)for(var v=0;v<=f;v++){var m=n.mobile.isZJ(d,v);m!=-1&&(e[m]+=n.number.combo(a,d)*n.number.combo(o-a,5-d)*n.number.combo(u-f,2-v)*n.number.combo(f,v))}var g="red";for(var v=0;v<r;v++){var y=n.mobile.bonus[v];e[v]>0?(l.eq(v).addClass(g),c.eq(v).addClass(g)):(l.eq(v).removeClass(g),c.eq(v).removeClass(g)),y==0?(h=0,c.eq(v).parent().text("\u672a\u516c\u5e03"),l.eq(v).text(e[v])):(p+=n.number.format(y,0,0)*e[v],l.eq(v).text(e[v]),c.eq(v).text(n.number.format(y,0,0)*e[v]))}var b=t("#mymoney");h==1?b.html('\u60a8\u4e2d\u5956\u603b\u91d1\u989d\u662f: <cite class="red">'+p+"</cite> \u5143\uff0c\u5956\u91d1\u5206\u5e03\u5982\u4e0b\uff1a"):b.html("\u5956\u91d1\u6682\u672a\u516c\u5e03\uff01"),t.goAnimatetop(),t(".pop_mask").css({height:n.number.pageHeight("height")+"px",width:n.number.pageHeight("width")+"px"}),t(".pop-box,.pop_mask").show()},n.mobile.initMoneyArea=function(){var e=t(".pop-tab .tr");for(var n=1;n<4;n++)e.eq(n).html('<cite class="nmoney">0</cite> \u5143')},n.mobile.initEvent=function(){t("#issue").on("change",function(){n.mobile.initOpencode()}),t(".btn-num").on(n.lottery.tap,function(){var e=t(this);t(".menu-pop").addClass("none"),e.hasClass("btn-numon")?(e.removeClass("btn-numon"),e.parent().find(".menu-pop").addClass("none")):(e.addClass("btn-numon"),e.parent().find(".menu-pop").removeClass("none"))}),t(".menu-popc").on(n.lottery.tap,"a",function(){var e=t(this),r=e.parent().parent(),i=e.text(),s=e.parent().attr("type");e.addClass("on").siblings(".on").removeClass("on"),t("#"+s+"ball").text(i),r.addClass("none"),r.siblings(".btn-num").removeClass("btn-numon"),/(hit)/i.test(s)||n.mobile.count()}),t(".btn-hm").on(n.lottery.tap,function(){n.mobile.calculateBonus()}),t(".cls,.btn-18").on(n.lottery.tap,function(){t(".pop-box,.pop_mask").hide(),n.mobile.initMoneyArea()}),t('input[name="intype"]').on(n.lottery.tap,function(){var e=t(this),r=e.val()*1,i=t("#tcount").text()*1,s=t("#tmoney");r==1?(n.mobile.price=3,s.text(i*n.mobile.price)):(n.mobile.price=2,s.text(i*n.mobile.price)),s.text(i*n.mobile.price),n.mobile.reflashSimple(r)})},t(function(){n.mobile.initOpenissue(),n.mobile.initEvent()})})(window);